<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sapron</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="sapron.html"><strong aria-hidden="true">1.</strong> Sapron</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Login/login.html"><strong aria-hidden="true">1.1.</strong> Login</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Login/logout.html"><strong aria-hidden="true">1.1.1.</strong> Deslogar</a></li><li class="chapter-item expanded "><a href="Login/create_new_password.html"><strong aria-hidden="true">1.1.2.</strong> Criar nova senha</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.2.</strong> Multicalendário</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="Multicalendar/calendar.html"><strong aria-hidden="true">1.2.1.</strong> Multicalendar</a></li><li class="chapter-item expanded "><a href="Multicalendar/create_reservation.html"><strong aria-hidden="true">1.2.2.</strong> Criar reserva</a></li><li class="chapter-item expanded "><a href="Multicalendar/create_lock.html"><strong aria-hidden="true">1.2.3.</strong> Criar bloqueio</a></li><li class="chapter-item expanded "><a href="Multicalendar/cancel_reservation.html"><strong aria-hidden="true">1.2.4.</strong> Cancelar reserva/bloqueio</a></li><li class="chapter-item expanded "><a href="Multicalendar/extend_reservation.html"><strong aria-hidden="true">1.2.5.</strong> Estender reserva</a></li><li class="chapter-item expanded "><a href="Multicalendar/calendar_navigation.html"><strong aria-hidden="true">1.2.6.</strong> Navegação pelas setas</a></li><li class="chapter-item expanded "><a href="Multicalendar/mini_calendar.html"><strong aria-hidden="true">1.2.7.</strong> Mini calendário (navegação rápida)</a></li><li class="chapter-item expanded "><a href="Multicalendar/property_search.html"><strong aria-hidden="true">1.2.8.</strong> Buscar imóvel</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.3.</strong> Anfitrião</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="Host/Controll/controle.html"><strong aria-hidden="true">1.3.1.</strong> Controle</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Host/Controll/cards.html"><strong aria-hidden="true">1.3.1.1.</strong> Cards checkin/checkout/limpeza</a></li></ol></li><li class="chapter-item expanded "><a href="Host/Expenses/expenses.html"><strong aria-hidden="true">1.3.2.</strong> Despesas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Host/Expenses/new_expense.html"><strong aria-hidden="true">1.3.2.1.</strong> Nova despesa</a></li><li class="chapter-item expanded "><a href="Host/Expenses/search.html"><strong aria-hidden="true">1.3.2.2.</strong> Filtro de busca</a></li></ol></li><li class="chapter-item expanded "><a href="Host/dashboard.html"><strong aria-hidden="true">1.3.3.</strong> Dashboard</a></li><li class="chapter-item expanded "><a href="Host/links.html"><strong aria-hidden="true">1.3.4.</strong> Lnks</a></li></ol></li><li class="chapter-item expanded "><a href="Owner/owner.html"><strong aria-hidden="true">1.4.</strong> Proprietário</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="Owner/kpis.html"><strong aria-hidden="true">1.4.1.</strong> Kpis</a></li><li class="chapter-item expanded "><a href="Owner/properties.html"><strong aria-hidden="true">1.4.2.</strong> Imóveis</a></li><li class="chapter-item expanded "><a href="Owner/grid_revenue.html"><strong aria-hidden="true">1.4.3.</strong> Grid de faturamento</a></li><li class="chapter-item expanded "><a href="Owner/property_details.html"><strong aria-hidden="true">1.4.4.</strong> Detalhes do imóvel</a></li><li class="chapter-item expanded "><a href="Owner/event_section.html"><strong aria-hidden="true">1.4.5.</strong> Seção de eventos</a></li><li class="chapter-item expanded "><a href="Owner/indivual_calendar.html"><strong aria-hidden="true">1.4.6.</strong> Calendário individual</a></li><li class="chapter-item expanded "><a href="Owner/create_lock.html"><strong aria-hidden="true">1.4.7.</strong> Solicitar bloqueio</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Sapron</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sapron"><a class="header" href="#sapron">Sapron</a></h1>
<p>O Sapron é um PMS desenvolvido pela empresa Seazone, a fim de atender suas demandas no mercado de aluguel de temporada.</p>
<p>Esta é a documentação de desenvolvimento do front-end.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="login"><a class="header" href="#login">Login</a></h1>
<blockquote>
<p>Essa feature permite ao usuário acessar o PMS Sapron com email e senha.</p>
</blockquote>
<h2 id="como-está-codado"><a class="header" href="#como-está-codado">Como está codado?</a></h2>
<ul>
<li>Para acessar o sistema senha e email são obrigatórios;</li>
<li>O campo da senha por padrão oculta o que foi digitado pelo usuário;</li>
<li>Somente ao clicar no olho do campo senha o que foi digitado fica visível;</li>
<li>Se o campo de senha não for preenchido a mensagem “Senha obrigatória” deve ser exibida para o usuário;</li>
<li>Se o usuário ou senha não forem válidos o sistema deve mostrar mensagem “Não foi possível efetuar o login”;</li>
<li>Se usuário e senha estiverem corretos o usuário deve ser redirecionado para: 
<ol>
<li><strong>Atendente</strong>: redireciona para Página do multicalendario.</li>
<li><strong>Host</strong>: redireciona para Página de controle;</li>
<li><strong>Owner</strong>: redireciona par Página do Proprietário;</li>
</ol>
</li>
</ul>
<p>Ao clicar no botão Entrar o sistema faz um POST no endpoint:</p>
<pre><code class="language-bash">http://localhost:8000/login/token/
</code></pre>
<h2 id="onde-está-o-código"><a class="header" href="#onde-está-o-código">Onde está o código</a></h2>
<p><strong>Frontend</strong> <a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/pages/Login/Login.tsx">aqui</a></p>
<h2 id="o-que-está-hard-coded"><a class="header" href="#o-que-está-hard-coded">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="logout--deslogar"><a class="header" href="#logout--deslogar">Logout / Deslogar</a></h1>
<blockquote>
<p>Essa feature permite que o usuário saia do sistema</p>
</blockquote>
<h1 id="como-está-codado-1"><a class="header" href="#como-está-codado-1">Como está codado?</a></h1>
<ul>
<li>Ao clicar na opção “Sair”, o sistema chama a função <code>Logout()</code> do <code>userContext()</code>. Dentro desse contexto a função <code>Logout()</code> recebe o resultado da função <code>handleLogout()</code>.</li>
</ul>
<pre><code class="language-bash">const handleLogout = () =&gt; {
    localStorage.removeItem('sapron-pms-user');
};
</code></pre>
<p>Essa função é responsável por limpar o localStorage removendo assim o token do usuário.</p>
<ul>
<li>Após sair o usuário é redirecionado à página de Login;</li>
<li>O usuário não deve acessar as páginas do sistema pela url sem inserir o login novamente.</li>
</ul>
<h2 id="deslogar-por-inatividade"><a class="header" href="#deslogar-por-inatividade">Deslogar por inatividade</a></h2>
<p>O sistema também desloga o usuário após um tempo predeterminado caso ele não tenha interação com o front.
Essa validação de inatividade é feita pelo backend que determina qual é o tempo.</p>
<h2 id="onde-está-o-código-1"><a class="header" href="#onde-está-o-código-1">Onde está o código</a></h2>
<p><strong>Frontend</strong> <a href="https://github.com/billbenettiSeazone/sapron-pms-web/blob/main/front/src/context/UserContext.tsx">aqui</a></p>
<h2 id="o-que-está-hard-coded-1"><a class="header" href="#o-que-está-hard-coded-1">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="esqueci-minha-senha--criar-nova-senha"><a class="header" href="#esqueci-minha-senha--criar-nova-senha">Esqueci minha senha / criar nova senha</a></h1>
<blockquote>
<p>Essa feature permite que o usuário crie uma nova senha de acesso caso ele esqueça sua senha.</p>
</blockquote>
<h1 id="como-está-codado-2"><a class="header" href="#como-está-codado-2">Como está codado?</a></h1>
<ul>
<li>Ao clicar na opção <code>Esqueci a senha</code> na tela de login o sistema deve abrir um campo para usuário informar email;</li>
<li>Ao clicar em <code>Enviar e-mail de recuperação</code> o sistema deve enviar um email com link para criar nova senha para o endereço de email informado;</li>
<li>Ao clicar no link, o usuário deve ser redirecionado para a página de alterar senha;</li>
<li>O sistema deve validar se a nova senha contém no mínimo 8 caracteres;</li>
<li>O sistema deve verificar se a senha e confirmação de senha são iguais;</li>
</ul>
<p>A validação de quantidade mínima de caracteres e se senha e confirmação de senha são iguais é feita pelo front-end usando o <code>Yup</code>.</p>
<pre><code class="language-bash">const validation = Yup.object().shape({
    password: Yup.string().min(8, 'Senha deve conter no mínimo 8 caracteres').required('Senha obrigatória!'),
    confirmationPassword: Yup.string().oneOf([Yup.ref('password'), null], 'As senhas não correspondem!').required('Confirmação de senha obrigatória!'),
  });
</code></pre>
<h2 id="onde-está-o-código-2"><a class="header" href="#onde-está-o-código-2">Onde está o código</a></h2>
<p><strong>Frontend</strong> </p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/NewPassword">aqui</a></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/pages/ForgotPassword">aqui</a></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/pages/NewPasswordPage">aqui</a></p>
<h2 id="o-que-está-hard-coded-2"><a class="header" href="#o-que-está-hard-coded-2">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="multicalendar"><a class="header" href="#multicalendar">Multicalendar</a></h1>
<p><img src="Multicalendar/../../images/calendar.png" alt="The Rust Logo" /></p>
<p>O multicalendario é acessivel pelos usuários <code>Attendant</code>, <code>Host</code>, <code>Seazone</code> e <code>Admin</code>. Cada um desses usuários possuem diferentes permissões no calendário.</p>
<h2 id="permissão-attendent"><a class="header" href="#permissão-attendent">Permissão Attendent</a></h2>
<p>O atendente tem acesso a todas as funcionalidades do calendário.</p>
<h2 id="permissão-host"><a class="header" href="#permissão-host">Permissão Host</a></h2>
<p>O usuário Host tem acesso limitado ao calendário.
Ele pode:</p>
<ul>
<li>Criar bloqueios;</li>
<li>Cancelar bloqueios;</li>
<li>Visualizar reservas/bloqueio;</li>
<li>Navegar entre as datas pelo mini calendário;</li>
<li>Navegar entre as propriedades;</li>
<li>Recolher categorias;</li>
<li>Buscar um imóvel;</li>
<li>Filtrar busca de imóvel.</li>
</ul>
<p>Ele NÃO pode:</p>
<ul>
<li>Cancelar reserva;</li>
<li>Criar reserva;</li>
<li>Estender reserva;</li>
<li>Ver dados financeiros da reserva.</li>
</ul>
<p>As ações que ele não pode executar ficam ocultas.</p>
<h2 id="permissão-seazone"><a class="header" href="#permissão-seazone">Permissão Seazone</a></h2>
<h2 id="permissão-admin"><a class="header" href="#permissão-admin">Permissão Admin</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="criar-reserva"><a class="header" href="#criar-reserva">Criar reserva</a></h1>
<blockquote>
<p>Feature que permite que o usuário insira uma reserva.</p>
</blockquote>
<h2 id="como-está-codado-3"><a class="header" href="#como-está-codado-3">Como está codado?</a></h2>
<ul>
<li>Todas as células de data do calendário são clicáveis, ao clicar em uma ou mais células o sistema abre um modal de opções.</li>
<li>Ao clicar na opção <code>Criar reserva</code>, é feito um GET no endpoint em <code>/otas</code> que retorna a lista de otas e preenche o dropdown associado as otas</li>
<li>Na seção “Dados do hóspede”, conforme o campo vai sendo preenchido, é feita uma busca na API com endpoint em <code>/guests/autocomplete/?search=</code> que retorna todos os hóspedes cadastrados e cujos nomes casam com o termo digitado no campo de busca.</li>
<li>Todas as validações nos campos do form são feitas com Yup.</li>
<li>Ao clicar em <code>Salvar</code> chama a função <code>postReservation</code> que faz um post no endpoint <code>/guests/</code> para salvar o hóspede e um post no endpoint <code>/calendar/reservations/</code> para salvar a reserva.</li>
<li>Não é permitido que a reserva seja criada em uma data já ocupada.</li>
</ul>
<h2 id="onde-está-o-código-3"><a class="header" href="#onde-está-o-código-3">Onde está o código?</a></h2>
<p><strong>Frontend</strong> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/components/Calendar/Reservation/Modal/">Componente modal</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/services/Guest/request.ts">Requisição hóspede</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/services/Reservation/request.ts">Requisição reserva</a></p>
<h2 id="o-que-está-hard-coded-3"><a class="header" href="#o-que-está-hard-coded-3">O que está hard coded?</a></h2>
<ul>
<li>Está sendo feita uma requisição para buscar a reserva que acabou de ser criada na api com endpoint em <code>calendar/reservations/</code>. Essa requisição retorna os dados de todas as reservas ao invés de retornar somente a informação da reserva que acabou de ser criada.</li>
<li>A função <code>getReservations</code> existente no contexto do componente <code>Calendar</code> está sendo chamada no componente <code>CalendarReservationModal</code>. Porém, essa função deveria ser usada apenas para requisitar os dados das reservas de novas propriedades que são carregadas assim que o scroll é movido</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="criar-novo-bloqueio"><a class="header" href="#criar-novo-bloqueio">Criar novo bloqueio</a></h1>
<blockquote>
<p>Essa feature permite que o usuário bloqueie um imóvel por um período de tempo impedindo que ele receba reservas durante o período selecionado.</p>
</blockquote>
<h2 id="como-está-codado-4"><a class="header" href="#como-está-codado-4">Como está codado?</a></h2>
<ul>
<li>O formulário para criar bloqueio é o mesmo formulário de criar reserva.</li>
<li>Todas as células de data do calendário são clicáveis, ao clicar em uma ou mais células o sistema abre um modal de opções.</li>
<li>Ao clicar na opção “Criar bloqueio” o sistema abre um modal lateral para o usuário preencher as informções do bloqueio.</li>
<li>O campo <code>Datas</code> e <code>Motivo do bloqueio</code> são obrigatórios. Além disso o sistema valida se a data de checkout é maior que a data de checkin. A validação desses campos é feita usando o Yup.</li>
</ul>
<pre><code class="language-bash">const validationBlock = Yup.object().shape({
    reason: Yup.string().required(),
    checkInDate: Yup.date().required(),
    checkOutDate: Yup
      .date()
      .when('checkInDate',
        (checkInDate: any, schema: Yup.DateSchema) =&gt; (
          checkInDate &amp;&amp; schema.min(checkInDate, 'A data deve ser maior que data de check-in')))
      .required(),
  });
</code></pre>
<ul>
<li>Ao clicar no botão “Salvar” o sistema faz um post no endpoint <code>/calendar/blocking/</code>:</li>
</ul>
<pre><code class="language-bash">export const postBlocking = async (values: BlockFormData) =&gt; {
  await Promise.all(values.properties.map((property) =&gt; (
    request.post('/calendar/blocking/', {
      code: uuid(),
      check_in_date: moment(values.checkInDate).format('DD/MM/YYYY'),
      check_out_date: moment(values.checkOutDate).format('DD/MM/YYYY'),
      blocking_reason: values.blockingReason.value,
      comment: values.notes,
      property: property.id,
      status: 'Active',
    }))));
};
</code></pre>
<h2 id="onde-está-o-código-4"><a class="header" href="#onde-está-o-código-4">Onde está o código?</a></h2>
<p><strong>Frontend</strong> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/Calendar/Reservation/Modal">Interface do componente</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Reservation">Requisições a APIs</a></p>
<h2 id="o-que-está-hard-coded-4"><a class="header" href="#o-que-está-hard-coded-4">O que está hard coded?</a></h2>
<ul>
<li>O formulário para criar bloqueio é o mesmo de criar reserva, usamos uma variável chamada <code>isReservation</code> que recebe <code>true</code> ou <code>false</code>, quando o valor for <code>false</code> apenas os campos usados no bloqueio são mostrados. </li>
<li>O simple select <code>Motivo do bloqueio</code> está estático no front, não é carregado pela API. O envio desses campos está sendo feito enviando o nome em inglês do motivo para o endpoint de criação de bloqueio <code>/calendar/blocking/</code>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cancelar-reservabloqueio"><a class="header" href="#cancelar-reservabloqueio">Cancelar reserva/bloqueio</a></h1>
<blockquote>
<p>Feature que permite que o usuário cancele uma reserva</p>
</blockquote>
<h2 id="como-está-codado-5"><a class="header" href="#como-está-codado-5">Como está codado?</a></h2>
<ul>
<li>Ao clicar na reserva/bloqueio o modal lateral abre com todos os Dados da reserva/bloqueio. </li>
<li>Na parte inferior existe um botão chamado <code>Cancelar reserva</code> (caso seja um bloqueio, o texto do botão deverá aparecer como cancelar bloqueio).</li>
<li>Ao clicar no botão de <code>Cancelar reserva</code> o sistema abre um modal para inserir o motivo do cancelamento da reserva/bloqueio.</li>
<li>Após preenchido o motivo do cancelamento e clicar no botão <code>Cancelar reserva</code>, o sistema chama a função <code>putReservationStatus</code> que faz um PUT no endpoint <code>calendar/reservations/</code> atualizando o campo status da reserva para <em>canceled</em>.</li>
</ul>
<pre><code class="language-bash">export const putReservationStatus = async (
  data: Reservation,
  newStatus: ReservationStatus,
  newComment: string,
  id: number,
) =&gt; {
  await request.put(`/calendar/reservations/${id}/`, {
    ...data,
    guest: data.guest.id,
    status: newStatus,
    comment: newComment,
  });
};
</code></pre>
<ul>
<li>Após cancelar a reserva a cor do marcador dela é alterada para cinza tanto no modal lateral quanto no calendário.</li>
<li>Ao clicar sobre uma reserva já cancelada o botão de <code>Cancelar reserva</code> deve estar desabilitado.</li>
<li>O sistema permite criar uma reserva no lugar de uma reserva cancelada.</li>
</ul>
<h2 id="onde-está-o-código-5"><a class="header" href="#onde-está-o-código-5">Onde está o código?</a></h2>
<p><strong>frontend</strong> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/Calendar/Reservation/ModalCancell">Modal cancelar reserva</a></p>
<p><strong>Requisições a APIs:</strong> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Reservation">Request reserva</a></p>
<p><strong>Recursos de contextos (estados, funções, hooks):</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/hooks/ReservationHook">Hook reservation</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/context/ReservationContext.tsx">Contexto reservation</a></p>
<p><strong>backend:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/reservation">Api reservation</a></p>
<h2 id="o-que-está-hard-coded-5"><a class="header" href="#o-que-está-hard-coded-5">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="estender-reserva"><a class="header" href="#estender-reserva">Estender reserva</a></h1>
<blockquote>
<p>Feature permite que o usuário estenda reservas tanto para check-in como para check-out</p>
</blockquote>
<h2 id="como-está-codado-6"><a class="header" href="#como-está-codado-6">Como está codado?</a></h2>
<ul>
<li>
<p>Ao clicar na reserva/bloqueio o modal lateral abre com todos os Dados da reserva/bloqueio.</p>
</li>
<li>
<p>Na parte inferior do modal tem o botão <code>Estender a reserva</code>.</p>
</li>
<li>
<p>Ao clicar no botão de estender reserva, o sistema abre um novo modal com 3 opções de extensão para o usuário:</p>
<ul>
<li><strong><code>Early check-in:</code></strong> faz uma extensão do tipo check-in de apenas um dia.</li>
<li><strong><code>Late check-out:</code></strong> faz uma extensão do tipo check-out, de apenas um dia. </li>
<li><strong><code>Extensão:</code></strong> o usuário escolhe entre uma extensão do tipo check-in ou check-out, sendo que nesta opção há a possibilidade de estender mais de um dia.</li>
</ul>
</li>
<li>
<p>Ao escolher Early check-in ou Late check-out o sistema mostra os campos de valor, forma de pagamento e notas para serem preenchidos.</p>
</li>
<li>
<p>Ao escolher a opção Extensão o usuário escolhe se será extensão de check-in ou check-out e depois seleciona uma nova data para esse evento.</p>
<ul>
<li>O cálculo do preço é baseado no número de dias estendidos.</li>
<li>Ao selecionar <code>Sim</code> em <code>Gerar um novo contrato</code> o sistema mostra uma série de campos para serem preenchidos e o novo contrato deverá ser gerado.</li>
</ul>
</li>
<li>
<p>Ao clicar no botão de estender reserva, o sistema faz um POST no endpoint <code>calendar/reservations/</code>.
Os seguintes campos deverão assumir os valores abaixo na reserva estendida:</p>
<ul>
<li>early ou check-in
<pre><code class="language-bash">is_early_extension: true,
original_reservation: apontará para o id da reserva original
</code></pre>
</li>
<li>late ou check-out
<pre><code class="language-bash">is_late_extension: true,
original_reservation: apontará para o id da reserva original
</code></pre>
</li>
</ul>
</li>
<li>
<p>Após isso, a api com a endpoint em <code>calendar/reservations/</code> deverá ser chamada novamente, dessa vez com o método PUT para atualizar na reserva original os campos abaixo:</p>
<ul>
<li>early ou check-in
<pre><code class="language-bash">has_early_extension: true,
early_extension_reservation: aponta para o id da extensão de early
</code></pre>
</li>
<li>late ou check-out
<pre><code class="language-bash">has_late_extension: true,
late_extension_reservation: aponta para o id da extensão de late
</code></pre>
</li>
</ul>
</li>
<li>
<p>A extensão criada deverá aparecer no calendário na cor verde claro assim que a reserva for estendida.</p>
</li>
<li>
<p>ao clicar novamente na reserva, caso já exista uma extensão de check-in: novas extensões de check-in serão bloqueadas. A mesma ideia é válida para as extensões de check-out.</p>
</li>
<li>
<p>Ao ser realizada uma extensão de check-in e uma extensão de check-out, o botão de estender reservas ficará desabilitado, e o texto mudará para “reserva já estendida&quot;.</p>
</li>
<li>
<p>o usuário não deve ser capaz de estender uma reserva sobre outra reserva ativa.</p>
</li>
<li>
<p>o usuário não deve ser capaz de estender o checkout de uma reserva que já possui uma extensão de checkout.</p>
</li>
<li>
<p>o usuário não deve ser capaz de estender o check in de uma reserva que já possui uma extensão de check in.</p>
</li>
<li>
<p>O modal fecha automaticamente ao final da requisição de estender a reserva.</p>
</li>
</ul>
<h2 id="onde-está-o-código-6"><a class="header" href="#onde-está-o-código-6">Onde está o código?</a></h2>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/Calendar/Reservation/ModalExtendReserve">Modal estender reserva</a></p>
<h2 id="o-que-está-hard-coded-6"><a class="header" href="#o-que-está-hard-coded-6">O que está hard coded?</a></h2>
<p>A lógica precisa ser diferente para cada uma das 3 opções 
A parte mais complexa do componente está em atualizar o estado do dataGrouped, o que pede uma refatoração futura.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="navegar-entre-as-datas-e-imóveis"><a class="header" href="#navegar-entre-as-datas-e-imóveis">Navegar entre as datas e imóveis</a></h1>
<blockquote>
<p>Feature que permite ao usuário navegar entre as datas e imóveis do calendário.</p>
</blockquote>
<h1 id="como-está-codado-7"><a class="header" href="#como-está-codado-7">Como está codado?</a></h1>
<h2 id="setas-horizontais"><a class="header" href="#setas-horizontais">Setas horizontais</a></h2>
<ul>
<li>O calendário carrega a quantidade de datas que cabem na tela do usuário começando pela data atual.</li>
<li>Para navegar entre as datas(avançar e voltar) o usuário usa as setas horizontais. Ao clicar na seta a direita sistema chama a função <code>addNextDates</code> e mais datas são colocadas na tela avançando as datas.</li>
</ul>
<pre><code class="language-bash">const addNextDates = (): void =&gt; {
    setLoadDate(true);
    setLoadShimmerDailyPrices(true);
    const lastDate = dates[dates.length - 1];

    const nextDates: Moment[] = Array.from({ length: NEXT_DATES_PER_PAGE },
      (_, index: number) =&gt; moment(lastDate).add(index + 1, 'days'));

    const arrayDates = Array.from(new Set([
      ...dates.slice(dates.length - NEXT_DATES_PER_PAGE, dates.length),
      ...nextDates,
    ]));

    setDates(arrayDates);
    setLastDateVisible(lastDate);
    setLoadReservation(true);
  };
</code></pre>
<p>Ao clicar na seta a esquerda o sistema chama a função <code>addPastDates</code> e mais datas são colocadas na tela regredindo as datas.</p>
<pre><code class="language-bash">const addPastDates = (): void =&gt; {
    setLoadDate(true);
    setLoadShimmerDailyPrices(true);
    const firstDate = dates[0];

    const pastDates: Moment[] = Array.from({ length: NEXT_DATES_PER_PAGE },
      (_, index: number) =&gt; moment(firstDate).add(-(index + 1), 'days'));

    const arrayDates = Array
      .from(new Set([...pastDates.reverse(), ...dates.slice(0, NEXT_DATES_PER_PAGE)]));

    setDates(arrayDates);
    setLastDateVisible(firstDate);
    setLoadReservation(true);
  };
</code></pre>
<ul>
<li>Ao clicar nas setas horizontais é feito uma chamada a API no endpoint <code>/calendar/reservations/?check_in_date__lte={year-month-day}&amp;check_out_date__gte={year-month-day}&amp;listing__property__in={id1, id2}</code> que retorna as reservas do conjunto de imóveis no intervalo de dias passados no corpo dessa requisição.</li>
<li>os dados retornados devem ser exibidos no calendário.</li>
<li>A última data visível na tela antes do usuário clicar na seta, deve estar visível na nova página de modo que o usuário possa mover o scroll começando sempre a partir deste imóvel.</li>
</ul>
<h2 id="setas-verticais"><a class="header" href="#setas-verticais">Setas verticais</a></h2>
<ul>
<li>As setas verticais só são mostradas em tela após o usuário scrollar todos os imóveis que já estão em tela.</li>
<li>caso o usuário clique sobre essa seta, a API com endpoint em <code>/calendar/properties/?page={pageNumber}</code> deve retornar os próximos 25 imóveis.</li>
<li>em seguida, a API com endpoint em <code>/calendar/reservations/?check_in_date__lte={year-month-day}&amp;check_out_date__gte={year-month-day}&amp;listing__property__in={id1, id2}</code> deve retornar as reservas do conjunto de imóveis no intervalo de dias passados no corpo dessa requisição.</li>
<li>os dados retornados devem ser exibidos no calendário.</li>
<li>o último imóvel visível na tela antes do usuário clicar na seta, deve estar visível na nova página de modo que o usuário possa mover o scroll começando sempre a partir deste imóvel.</li>
</ul>
<p><strong>Frontend</strong> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/components/Calendar/Calendar.tsx">Componente calendário</a></p>
<p><strong>Requisições a APIs:</strong> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Property">Requisição imóveis</a> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Reservation">Requisição reservas</a></p>
<p><strong>Backend</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/property/apis">Api property</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/reservation/apis">Api reservations</a></p>
<h2 id="o-que-está-hard-coded-7"><a class="header" href="#o-que-está-hard-coded-7">O que está hard coded?</a></h2>
<ul>
<li>Algumas funcionalidades presentes no componente “Calendar.tsx” precisam de uma refatoração futura para que o código fique mais limpo.</li>
<li>A lógica para mover o scroll de posição está had coded e precisa ser melhorada.</li>
<li>A função <code>addReservation</code> do contexto do Calendário é compartilhada entre outros componentes do sistema, tais como os componentes: <code>Navigation.tsx</code> e <code>CalendarReservationModal.tsx</code>. Portanto, quaisquer alterações nessas funções serão refletidas nos componentes que as usam.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="minicalendar"><a class="header" href="#minicalendar">Minicalendar</a></h1>
<blockquote>
<p>Feature que permite que o usuário vá para determinada data através de um mini calendário  no canto direito superior da tela.</p>
</blockquote>
<h2 id="como-está-codado-8"><a class="header" href="#como-está-codado-8">Como está codado?</a></h2>
<ul>
<li>Ao clicar no ícone do mini calendário um pequeno modal de datas é aberto.</li>
<li>Ao clicar fora do modal do calendário ele fecha.</li>
<li>Ao clicar na seta da esquerda do modal ele exiba um mês anterior ao que estava.</li>
<li>Ao clicar na seta da direita do modal ele exiba o mês posterior ao que estava.</li>
<li>Ao clicar em algum dia do calendário o sistema redireciona o usuário para o dia selecionado.</li>
</ul>
<h2 id="onde-está-o-código-7"><a class="header" href="#onde-está-o-código-7">Onde está o código?</a></h2>
<p><strong>Frontend:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/Calendar/FastDataForwardButton">Componente minicalendario</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/components/Calendar/Calendar.tsx">Componente calendario</a></p>
<p><strong>Requisições a APIs:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Property">Requisição Propriedades</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Reservation">Requisição reservas</a></p>
<p><strong>Recursos de contextos (estados, funções, hooks):</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/context/SearchContext.tsx">Contexto de busca</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/hooks/SearchHook">Hook de busca</a></p>
<p>Backend: 
<a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/property/apis">Api property</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/reservation/apis">Api resercation</a></p>
<h2 id="o-que-está-hard-coded-8"><a class="header" href="#o-que-está-hard-coded-8">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="buscar-imóvel"><a class="header" href="#buscar-imóvel">Buscar imóvel</a></h1>
<blockquote>
<p>Feature que permite que o usuário aplique filtros para listar os imóveis e mostrá-los no calendário. Ela permite restringir a busca de imóveis a partir do tipo de propriedade, categoria, localização, quantidade de quartos, quantidade de banheiros, se possui vista para o mar, aceita pets, aceita reserva mensal, e por anfitrião.</p>
</blockquote>
<h2 id="como-está-codado-9"><a class="header" href="#como-está-codado-9">Como está codado?</a></h2>
<ul>
<li>Conforme o campo de busca vai sendo preenchido, a API com endpoint em <code>/calendar/properties/?search=</code> deve retornar todos os imóveis cujos nomes casam com o termo digitado no campo de busca.</li>
<li>Os imóveis retornados pela chamada da API de propriedades devem ser mostrados em uma lista pelo sistema.</li>
<li>Com a lista de imóveis sendo mostrada, quando a tecla “Enter” for pressionada a API de reservas deverá retornar as reservas da lista de imóveis no intervalo de dias passado no corpo da requisição da API de reservas.</li>
<li>Ao realizar o passo anterior, as reservas do conjunto de imóveis filtrados deverão ser mostradas no calendário.</li>
<li>Ao clicar no botão “Limpar filtros”, os filtros devem ser resetados e o calendário deve retornar com todos os imóveis que eram mostrados antes da aplicação do filtro.</li>
<li>Ao clicar no ícone o sistema deve abrir um modal lateral com as opções:  Tipo de propriedade (Casa, hotel, apartamento), categoria, localização, quantidade de banheiros, quantidade de quartos, vista para o mar, aceita pets, aceita reserva mensal e anfitrião.</li>
<li>Ao abrir o modal lateral o sistema deve fazer um GET no endpoint <code>/categories/</code> retornando todas as categorias para o dropdown referente a categoria; também deve fazer um GET no endpoint <code>/locations/</code> retornando todas as localizações para o dropdown referente à localização, e por fim, deve fazer um GET no endpoint <code>/hosts/</code> retornando todos os anfitriões para o dropdown referente a anfitriões.</li>
</ul>
<h2 id="onde-está-o-código-8"><a class="header" href="#onde-está-o-código-8">Onde está o código?</a></h2>
<p><strong>Frontend:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/Calendar/Navigation">Componente navigation</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/FormMoreFilters">Componente formMoreFilters</a></p>
<p><strong>Requisições a APIs:</strong> </p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Property">Requisição imóveis</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Reservation">Requisição reservas</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Category">Requisição categorias</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Host">Requisição anfitriões</a></p>
<p><strong>Recursos de contextos (estados, funções, hooks):</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/context/SearchContext.tsx">Contexto searchContext</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/context/FilterBar.tsx">Contexto FilterBar</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/hooks/SearchHook">Hook SearchHook</a></p>
<p><strong>Backend:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/property/apis">Apis</a></p>
<h2 id="o-que-está-hard-coded-9"><a class="header" href="#o-que-está-hard-coded-9">O que está hard coded?</a></h2>
<ul>
<li>Os campos checkbox de Tipo de propriedade estão estáticos no front, não são carregados pela API. A busca desses campos está sendo feita enviando o nome em inglês do tipo de propriedade para o endpoint de busca de propriedades <code>/properties/details/</code>. Ex: Dentre as opções Apartamento, Casa e Hotel o usuário seleciona o tipo de propriedade Apartamento, o sistema verifica qual das opções foi marcada ou seja possui valor igual True e envia o nome, neste caso envia ‘Apartament’.</li>
<li>Atualmente a API só suporta um tipo de propriedade por vez.</li>
<li>Os campos checkbox de detalhes estão estáticos no front,  a busca está sendo feita enviando true ou false, true para os campos selecionados e false para os não selecionados.</li>
<li>Os dropdowns quartos e banheiros são preenchidos de forma estática. </li>
<li>Para proprietários que sejam pessoa jurídica o campo do nome do owner deve ser preenchido com o trading name.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="controle"><a class="header" href="#controle">Controle</a></h1>
<blockquote>
<p>Essa feature permite ao usuário visualizar eventos de checkin, checkout e limpeza por semana, preencher informações desses eventos e alternar entre as semanas de acordo com sua vontade. </p>
</blockquote>
<h2 id="como-está-codado-10"><a class="header" href="#como-está-codado-10">Como está codado</a></h2>
<ul>
<li>Ao abrir a página de Controle o sistema deve fazer 3 GET’s  no endpoint <code>/host_controller/</code> um para mostrar os checkins, um para mostrar os checkouts e um para mostrar as limpezas.</li>
<li>O sistema deve fazer um filtro por data em todos os checkins, checkouts e limpeza, os check-ins são ordenados de acordo com a data de check-in da reserva e os checkouts de acordo com a data de check-out.</li>
<li>Quando clicado na opção de <code>Próxima semana</code> o calendário é atualizado para os próximos 7 dias contando a partir do último que estáva sendo mostrado.</li>
<li>Quando clicado na opção <code>Semana anterior</code>, o calendário semanal mostrado deve ser atualizado para os 7 dias anteriores contando a partir do dia atual.</li>
<li>Além do calendário os cards também devem ser atualizados de acordo com a semana selecionada.</li>
<li>Os cards podem ser filtrados por tipo de evento(checkin, checkout e limpeza) através do checkbox, se todos os checkboxes estiverem selecionados o sistema mostra todos os eventos, se apenas um checkbox for selecionado o sistema deve mostrar apenas as eventos relacionados a ele, se mais de um checkbox for selecionado o sistema deve mostrar as tarefas relacionadas aos checkboxes selecionados.</li>
<li>Ao clicar sobre um card o sistema deve abrir um modal ao lado do card selecionado com mais <a href="Host/Controll/./cards.html">informações sobre a tarefa</a>.</li>
<li>A página de controle do anfitrião deve ser responsivo para mobile.</li>
</ul>
<h2 id="onde-está-o-código-9"><a class="header" href="#onde-está-o-código-9">Onde está o código</a></h2>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/pages/Controller">Página controle</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/ControllerPage">Componente controle</a></p>
<p><a href="Host/Controll/front/src/components/ControllerPage/HeaderContainer/HeaderConfig.tsx">Componente Header</a></p>
<p><strong>Recursos de contextos (estados, funções, hooks):</strong>
<a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/context/ControllerPage">Contexto controllerPage</a></p>
<h2 id="o-que-está-hard-coded-10"><a class="header" href="#o-que-está-hard-coded-10">O que está hard coded?</a></h2>
<ul>
<li>O endpoint usado para mostrar os dados de checkin, checkout  e limpeza é o mesmo, mudando apenas os parâmetros que são enviados. Para checkin os seguintes parâmetros são enviados: check_in_initial_date e check_in_final_date.</li>
<li>Para checkout são enviados os seguintes parâmetros: check_out_initial_date e check_out_final_date.</li>
<li>Para limpeza os seguintes parâmetros são enviados: check_out_initial_date e check_out_final_date.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cards-checkincheckoutlimpeza"><a class="header" href="#cards-checkincheckoutlimpeza">Cards checkin/checkout/limpeza</a></h1>
<blockquote>
<p>Feature que permite o usuário ver mais informações dos eventos de checkin, checkout e limpeza por meio de cards e realizar ações.</p>
</blockquote>
<ul>
<li>
<p>Os cards de checkout e checkin contém as principais informações da reserva e botões de ação.</p>
</li>
<li>
<p>Os cards de limpeza possuem apenas o código do imóvel, endereços e botões de ação.</p>
</li>
<li>
<p>As informações endereço, telefone e código da reserva possuem um botão ao lado que copia esses respectivos dados para área de tranferência.</p>
</li>
<li>
<p>O campo copiar reserva copia todas as informações da reserva.</p>
</li>
<li>
<p>O card de checkin de reserva possui as seguintes ações:</p>
<ul>
<li>
<ol>
<li>Enviar mensagem inicial.</li>
</ol>
</li>
<li>
<ol start="2">
<li>Preencher informações.</li>
</ol>
</li>
<li>
<ol start="3">
<li>Realizar check-in.</li>
</ol>
</li>
<li>
<ol start="4">
<li>Concluir check-in</li>
</ol>
</li>
</ul>
</li>
<li>
<p>O card de checkin de bloqueio possui as seguintes ações:</p>
<ul>
<li>
<ol>
<li>Preencher informações.</li>
</ol>
</li>
<li>
<ol start="2">
<li>Realizar check-in.</li>
</ol>
</li>
<li>
<ol start="3">
<li>Concluir check-in</li>
</ol>
</li>
</ul>
</li>
<li>
<p>O card de checkin de checkout possui as seguintes ações:</p>
<ul>
<li>
<ol>
<li>Enviar mensagem inicial.</li>
</ol>
</li>
<li>
<ol start="2">
<li>Preencher informações.</li>
</ol>
</li>
<li>
<ol start="3">
<li>Realizar check-out.</li>
</ol>
</li>
<li>
<ol start="4">
<li>Enviar pesquisa de feedback.</li>
</ol>
</li>
<li>
<ol start="5">
<li>Concluir checklist.</li>
</ol>
</li>
<li>Danos dos hóspedes.</li>
</ul>
</li>
<li>
<p>O card de checkout de bloqueio possui as seguintes ações:</p>
<ul>
<li>
<ol>
<li>Preencher informações.</li>
</ol>
</li>
<li>
<ol start="2">
<li>Realizar checkout.</li>
</ol>
</li>
<li>
<ol start="3">
<li>Concluir checklist</li>
</ol>
</li>
</ul>
</li>
<li>
<p>O card de limpeza possui as seguintes ações:</p>
<ul>
<li>
<ol>
<li>Preencher informações.</li>
</ol>
</li>
<li>
<ol start="2">
<li>Realizar limpeza.</li>
</ol>
</li>
<li>
<ol start="3">
<li>Finalizar vistoria.</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Ao clicar no no botão <code>1. Enviar mensagem inicial</code> o sistema abre um link do whatsapp web para enviar mensagem para o hóspede. A mensagem muda de acordo com o evento:</p>
<ul>
<li>
<p><strong><code>Evento de checkin:</code></strong> <em>&quot;Olá {nome do hóspede}, tudo bem? Sou a , e serei sua anfitriã {nome do anfitrião logado}. Você pode entrar em contato comigo para tirar dúvidas sobre a estada por aqui e, um dia antes da sua entrada, marcamos o horário de encontro e te passo as informações que você precisa sobre o endereço! Só para confirmar, para quantas pessoas é a estada? Boa semana e até logo.&quot;</em></p>
</li>
<li>
<p><strong><code>Evento de checkout:</code></strong> <em>Olá {nome do hóspede} Neto! Infelizmente amanhã já é o dia do seu checkout. Gostaria de saber que horas vocês pretendem sair do imóvel, lembrando que a saída é até às 11h.</em></p>
</li>
</ul>
</li>
<li>
<p>Ao clicar no botão <code>Preencher informações</code> o sistema abre um modal lateral para ser preenchido pelo host, ao clicar em <code>Salvar</code> o sistema faz um PUT ou POST no endpoint <code>xxx</code>.</p>
</li>
<li>
<p>Ao clicar no botão <code>Realizar check-in</code> de um evento checkin o sistema abre o form checklist checkin em uma nova aba com o campo imóvel preenchido.</p>
</li>
<li>
<p>Ao clicar no botão <code>Realizar check-in</code> de um evento checkout o sistema abre o form checklist checkout em uma nova aba com o campo imóvel preenchido.</p>
</li>
<li>
<p>Ao clicar no botão <code>Concluir checkin</code> para eventos de checkin ou <code>Concluir checlist</code> ou <code>Concluir checklist</code>para eventos de checkout <code>Finalizar vistoria</code>para eventos de limpeza o sistema marca o card como concluído.</p>
</li>
<li>
<p>Quando as informações são preenchidas e o card é marcado como concluido o sistema move o card para a seção concluídos.</p>
</li>
<li>
<p>Ao clicar no botão <code>Enviar pesquisa de feedback</code> o sistema abre em uma nova aba um link do whatsapp com a seguinte mensagem: </p>
<blockquote>
<p>Olá {nome do hóspede}, agradecemos muito pela sua companhia nestes últimos dias, tenha uma ótima viagem de retorno! Trabalhamos constantemente para melhorar nosso serviço e nossos imóveis, então se você puder nos deixar seu feedback te agradecemos muito, é rapidinho, não vai levar mais de 3 minutos. Link: https://docs.google.com/forms/d/e/1FAIpQLSdrlj9QUuXhUDy_dpl2EE8Bf7Mz1eopDp-AE3LBpJ54LFMRRQ/viewform?usp=pp_url&amp;entry.1675664374=2022-01-31&amp;entry.683665135={code do imóvel}</p>
</blockquote>
</li>
<li>
<p>Ao clicar no botão <code>Danos dos hóspedes</code>o sistema abre em uma nova aba o form do google de Danos do hóspede.</p>
</li>
<li>
<p>Ao clicar no botão <code>Realizar limpeza</code>o sistema abre em uma nova aba o form do google de Vistoria limpeza.</p>
</li>
<li>
<p>Ao clicar sobre o código da reserva ou no botão copiar o sistema copia o código para area de transferencia;</p>
</li>
<li>
<p>Ao clicar sobre o número de telefone ou no botão copiar o sistema copia o número para a área de transferência;</p>
</li>
<li>
<p>Ao passar o mouse sobre os botões de copiar e origem da reserva deve aparecer um texto indicando o que eles fazem;</p>
</li>
</ul>
<h2 id="onde-está-o-código-10"><a class="header" href="#onde-está-o-código-10">Onde está o código</a></h2>
<p><a href="Host/Controll/hfront/src/components/ControllerPage/Modal">Modal</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="despesas"><a class="header" href="#despesas">Despesas</a></h1>
<blockquote>
<p>Feature permite que o usuário visualize suas despesas com os imóveis</p>
</blockquote>
<h2 id="como-está-codado-11"><a class="header" href="#como-está-codado-11">Como está codado</a></h2>
<ul>
<li>Ao clicar em Despesas no menu lateral o sistema abre um nova página com todas as despesas cadastradas pelo anfitrião. Para isso o sistema faz um GET no endpoint <code>/expense/</code>.</li>
</ul>
<pre><code class="language-bash">    const { data } = await request.get('/expenses/');
</code></pre>
<ul>
<li>O sistema faz um GET no endpoint <code>/calendar/properties/?host__user=${userId}&amp;page_size=${pageSize}</code> para preencher o dropdown imóvel com os imóveis do host logado.</li>
</ul>
<pre><code class="language-bash">export const getPropertiesUserId = async (userId: string, pageSize: number = 25):
Promise&lt;PagedResult&lt;Property&gt;&gt; =&gt; {
  const { data } = await request.get(`/calendar/properties/?host__user=${userId}&amp;page_size=${pageSize}`);
  return data;
};
</code></pre>
<h2 id="onde-está-o-código-11"><a class="header" href="#onde-está-o-código-11">Onde está o código</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/Expenses">Componente</a></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/services/Expenses">Requisições a Api</a></p>
<h2 id="o-que-está-hard-coded-11"><a class="header" href="#o-que-está-hard-coded-11">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nova-despesa"><a class="header" href="#nova-despesa">Nova despesa</a></h1>
<blockquote>
<p>Essa feature permite que o anfitrião insira novas despesas no sistema.</p>
</blockquote>
<h2 id="como-está-codado-12"><a class="header" href="#como-está-codado-12">Como está codado</a></h2>
<ul>
<li>Ao clicar no botão <code>Nova despesa</code> o sistema abre um modal para o usuário preencher os dados da despesa.</li>
<li>Os campos imóvel, valor, motivo, e data são obrigatórios e para validar isso usamos o Yup.</li>
<li>O campos foto do recibo e foto da manutenção fazem upload de imagem.</li>
<li>Ao apertar a tecla esc, clicar fora do modal, clicar no botão de cancelar ou clicar no x do canto superior o modal deverá ser fechado.</li>
<li>Após preencher os campos e clicar em <code>Salvar</code> o sistema faz um POST no endpoint <code>/expense/</code> para sdalvar a despesa 
<pre><code class="language-bash">export const postExpenses = async (params: ExpenseType) =&gt; {
const { data } = await request.post('/expenses/', params);
return data;
};
</code></pre>
e depois faz um GET no endepoint <code>/expense/</code> para mostrar a despesa na tela.
<pre><code class="language-bash">const { data } = await request.get('/expenses/');
</code></pre>
</li>
</ul>
<h2 id="onde-está-o-código-12"><a class="header" href="#onde-está-o-código-12">Onde está o código</a></h2>
<p><strong>Font-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/Expenses">Componente</a></p>
<h2 id="o-que-está-hard-coded-12"><a class="header" href="#o-que-está-hard-coded-12">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filtro-de-busca"><a class="header" href="#filtro-de-busca">Filtro de busca</a></h1>
<blockquote>
<p>Feature permite que o usuário busque um imóvel aplicando filtros nas despesas conforme suas necessidades</p>
</blockquote>
<h2 id="como-está-codado-13"><a class="header" href="#como-está-codado-13">Como está codado</a></h2>
<ul>
<li>Usuário seleciona e preenche os campos desejados e clica em buscar. Ao clicar em buscar o sistema chama a função <code>getExpenses</code> que faz um get no endpoint <code>/expenses/</code> passando como paramêtro da requisição os itens selecionados pelo usuário.</li>
</ul>
<pre><code class="language-bash">xport const getExpenses = async (filters?: ExpenseType): Promise&lt;Array&lt;ExpenseType&gt;&gt; =&gt; {
  if (filters) {
    let params = {};
    if (filters.property_id) {
      params = { ...params, property_id: filters.property_id };
    }
    if (filters.expense_status) {
      params = { ...params, expense_status: filters.expense_status };
    }
    if (filters.refund_date_start) {
      params = {
        ...params,
        refund_date_start: filters.refund_date_start,
        refund_date_end: filters.refund_date_end,
      };
    }
    if (filters.register_date_start) {
      params = {
        ...params,
        register_date_start: filters.register_date_start,
        register_date_end: filters.register_date_end,
      };
    }

    const { data } = await request.get('/expenses/', { params });
    return data as ExpenseType[];
  }

  const { data } = await request.get('/expenses/');
  return data as ExpenseType[];
};
</code></pre>
<ul>
<li>Não é obrigatório selecionar todos os campos.</li>
</ul>
<h2 id="onde-está-o-código-13"><a class="header" href="#onde-está-o-código-13">Onde está o código</a></h2>
<p><a href="Host/Expenses/front/src/components/Expenses">Componente</a></p>
<h2 id="o-que-está-hard-coded-13"><a class="header" href="#o-que-está-hard-coded-13">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dashboard"><a class="header" href="#dashboard">Dashboard</a></h1>
<blockquote>
<p>Essa feature exibe uma tabela com todas as informações financeiras do anfitrião, propondo uma visualização mensal. </p>
</blockquote>
<h2 id="como-está-codado-14"><a class="header" href="#como-está-codado-14">Como está codado</a></h2>
<ul>
<li>Por padrão, a tabela recebe a informação de todos os imóveis no ano atual, sendo possível selecionar imóveis específicos e o ano através dos seletores no header. </li>
<li>Suas informações vem da api /financial_closing_host/.</li>
<li>Página em desenvolvimento, toda a página está estática.</li>
</ul>
<h2 id="onde-está-o-código-14"><a class="header" href="#onde-está-o-código-14">Onde está o código</a></h2>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/DashboardPage">Componente</a></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/pages/Dashboard">Page</a></p>
<h2 id="o-que-está-hard-coded-14"><a class="header" href="#o-que-está-hard-coded-14">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lnks"><a class="header" href="#lnks">Lnks</a></h1>
<blockquote>
<p>Feature permite que o anfitrião acesse os principais formulários que ele precisa.</p>
</blockquote>
<h2 id="como-está-codado-15"><a class="header" href="#como-está-codado-15">Como está codado</a></h2>
<ul>
<li>Cada botão é um link que leva pro seu respectivo form do google.</li>
<li>Ao clicar no botão o form abre em uma nova guia.</li>
</ul>
<pre><code class="language-bash">const handleGoToLink = (path: string) =&gt; {
    window.open(path, '_blank');
  };
</code></pre>
<h2 id="onde-está-o-código-15"><a class="header" href="#onde-está-o-código-15">Onde está o código</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/LinksPage">Componente LinksPage</a></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/pages/LinkPage">Page</a></p>
<h2 id="o-que-está-hard-coded-15"><a class="header" href="#o-que-está-hard-coded-15">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="proprietário"><a class="header" href="#proprietário">Proprietário</a></h1>
<blockquote>
<p>Feature que permite ao usuário visualizar seus imóveis, criar bloqueio, ver dados financeiros e eventos.</p>
</blockquote>
<ul>
<li>
<p>Ao clicar no botão solicitar bloqueio no Header da página o usuário é redirecionado para o fluxo de <a href="Owner/./create_lock_header.html">Solicitar bloqueio do imóvel</a>.</p>
</li>
<li>
<p><a href="Owner/./properties.html">Imóveis do proprietário</a></p>
</li>
<li>
<p><a href="Owner/./grid_revenue.html">Ver dados financeiros</a></p>
</li>
<li>
<p><a href="Owner/./event_section.html">Eventos</a>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kpis"><a class="header" href="#kpis">Kpis</a></h1>
<blockquote>
<p>Os KPIS mostram para o proprietário alguns dados financeiros 
-- O sistema deve mostrar no card de tarja verde a receita total desde o início do ano: (de Janeiro até o mês atual, inclusive a do mês atual)</p>
</blockquote>
<ul>
<li>No card de tarja azul claro o sistema deve mostrar o saldo do mês atual;</li>
<li>No card de tarja amarela o sistema deve mostrar a receita prevista do mês atual;</li>
<li>No card de tarja azul escuro o sistema deve mostrar a receita prevista de futuras reservas(Receita prevista a partir do mês/ano atual até Dezembro/{ano atual + 4 anos pra frente}  - o mês do ano atual não deve entrar no cálculo);</li>
</ul>
<h2 id="onde-está-o-código-16"><a class="header" href="#onde-está-o-código-16">Onde está o código?</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/OwnerPage/CardFinancial">Componente card KPI</a></p>
<p><strong>Requisições a APIs:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/services/Owner/request.ts">Requisições</a></p>
<p><strong>Backend:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/financial/apis">Apis</a></p>
<h2 id="o-que-está-hard-coded-16"><a class="header" href="#o-que-está-hard-coded-16">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="imóveis"><a class="header" href="#imóveis">Imóveis</a></h1>
<blockquote>
<p>Essa feature permite que o Proprietário visualize todos os seus imóveis</p>
</blockquote>
<ul>
<li>
<p>Ao abrir a página de proprietário o sistema deve fazer um get no  endpoint <code>/properties/owner/</code> para mostrar todos os imóveis do proprietário logado, a página tem um limite de 4 imóveis sendo exibidos inicialmente, caso o proprietário tenha mais de 4 imóveis, uma opção “Mais propriedades” é mostrada para que o usuário consiga ver todas as propriedades;</p>
</li>
<li>
<p>O sistema deve mostrar o status da propriedade, o status deve ser:</p>
<ul>
<li><code>Locado até DD/MM:</code> quando o imóvel estiver alugado e a cor da bolinha fica verde;</li>
<li><code>Disponível:</code> quando o imóvel não possuir reserva em andamento, caso o imóvel tenha reservas futuras mostrar a data do próximo check-in, caso não tenha reservas futuras ffica vazio, a cor da bolinha fica azul;</li>
<li><code>Bloqueado até DD/MM:</code> quando estiver com um bloqueio, a cor da bolinha fica vermelho;</li>
<li><code>Inativo:</code> quando o contrato desse imóvel estiver cancelado, a cor da bolinha fica cinza.</li>
</ul>
</li>
<li>
<p>Os cards de propriedade devem ser ordenador de ativos para inativos. Os imóveis ativos devem ser ordenados por ordem de cadastramento no sistema;</p>
</li>
<li>
<p>Os cards devem ser responsivo para mobile.</p>
</li>
<li>
<p>Ao clicar em visualizar imóvel ou em qualquer parte do componente imóvel o sistema redireciona o usuário para a página de <a href="Owner/./property_details.html">Detalhes do imóvel</a></p>
</li>
</ul>
<h2 id="onde-está-o-código-17"><a class="header" href="#onde-está-o-código-17">Onde está o código?</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/OwnerPage/CardProperties">Componente imóvel</a></p>
<p><strong>Requisições a APIs:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/services/Owner/request.ts">Requisições</a></p>
<p><strong>Backend:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/property/apis">Apis</a></p>
<h2 id="o-que-está-hard-coded-17"><a class="header" href="#o-que-está-hard-coded-17">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="grid-de-faturamento"><a class="header" href="#grid-de-faturamento">Grid de faturamento</a></h1>
<ul>
<li>Para alimentar o dropdown do menu e do grid o sistema deve fazer um get no endpoint <code>/properties/owner/</code> para listar as propriedades do proprietário logado.</li>
<li>Ao carregar a página de Proprietário o sistema deve carregar dentro do grid as informações de faturamento do ano atual de janeiro até dezembro somando os valores de todos os imóveis;</li>
<li>Ao selecionar um novo ano no campo de Ano, as informações do grid devem ser atualizadas de acordo com o ano selecionado;</li>
<li>Ao selecionar um imóvel específico o sistema deve mostrar somente as informações de faturamento do imóvel selecionado no ano selecionado.</li>
<li>O campo de select de Ano deve ser preenchido com o ano do início do contrato do proprietário até o ano atual, exemplo: O proprietário iniciou contrato com a Seazone do imóvel x em 2015 e o ano atual é 2021 então o Select é preenchido da seguinte forma (2021, 2020, 2019, 2018, 2017, 2016, 2015).</li>
<li>O campo de select do Imóvel deve ser preenchido com os imóveis do proprietário logado, para isso o sistema faz um get no endpoint <code>/properties/owner/</code>.</li>
<li>O sistema deve destacar o campo do mês atual com cor laranja;</li>
<li>O campo repasse do mês atual deve ficar em destaque na cor verde;</li>
<li>Os componentes devem ser responsivo para mobile.</li>
</ul>
<h2 id="onde-está-o-código-18"><a class="header" href="#onde-está-o-código-18">Onde está o código?</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/OwnerPage/GridRevenue">Componente Grid de faturamento</a></p>
<p><strong>Requisições a APIs:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/services/Owner/request.ts">Requisições</a></p>
<p><strong>Backend:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/backend/property/apis">Apis</a></p>
<h2 id="o-que-está-hard-coded-18"><a class="header" href="#o-que-está-hard-coded-18">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="detalhes-do-imóvel"><a class="header" href="#detalhes-do-imóvel">Detalhes do imóvel</a></h1>
<blockquote>
<p>Essa feature permite que o usuário visualize informações detalhadas de um imóvel específico, bem como o faturamento, receita e saldo do mês selecionado no calendário, previsão de receita,  e links das plataformas onde este imóvel está sendo anunciado.</p>
</blockquote>
<ul>
<li>Ao abrir a página com o card de detalhes da propriedade, o sistema faz um get no endpoint <code>/properties/details/${id}</code> passado o id do imóvel clicado na página anterior para mostrar as informações desse imóvel.</li>
</ul>
<pre><code class="language-bash">export const getPropertyId = async (id: string): Promise&lt;PropertyDetails&gt; =&gt; {
  const { data } = await request.get(`/properties/details/${id}`);
  return data;
};
</code></pre>
<ul>
<li>A parte de links deve conter os links dos anúncios do imóvel em todas as plataformas que ele está sendo anunciado. </li>
<li>O quadro de faturamento, receita e saldo devem ser preenchidos de acordo com o mês selecionado no calendário. </li>
<li>Os componentes devem ser responsivo para mobile.</li>
<li>Os seletores de mês/ano do card de detalhes do imóvel e do <a href="Owner/">Calendário do imóvel</a> estão vinculados, então é esperado que quando um for alterado altere o outro também.</li>
</ul>
<h2 id="onde-está-o-código-19"><a class="header" href="#onde-está-o-código-19">Onde está o código?</a></h2>
<p><strong>Front-end</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/OwnerPage/CardPropertyDetails">Componente CardPropertyDetails</a></p>
<p><strong>Requisições a APIs:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/services/Property">Requisição a Api</a></p>
<h2 id="o-que-está-hard-coded-19"><a class="header" href="#o-que-está-hard-coded-19">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="seção-de-eventos"><a class="header" href="#seção-de-eventos">Seção de eventos</a></h1>
<blockquote>
<p>Essa feature descreve a seção de eventos que ocorrem nos imóveis do proprietário</p>
</blockquote>
<ul>
<li>Para listar os eventos em tela o sistema chama função <code>getOwnerEvents()</code> que faz um GET no endpoint <code>/property/owner_events</code>.</li>
</ul>
<pre><code class="language-bash">export const getOwnerEvents = async () =&gt; {
  const { data } = await request.get('/property/owner_events/');
  return data as OwnerEventsResponseProps;
};
</code></pre>
<ul>
<li>Ao clicar em Ver imóvel o sistema redireciona o usuário para a página de <a href="Owner/./property_details.html">Detalhes do imóvel</a>.</li>
</ul>
<h2 id="onde-está-o-código-20"><a class="header" href="#onde-está-o-código-20">Onde está o código?</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/OwnerPage/EventSection">Componente EventSection</a></p>
<p><strong>Requisições a APIs:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/blob/main/front/src/services/Owner/request.ts">Requisições</a></p>
<h2 id="o-que-está-hard-coded-20"><a class="header" href="#o-que-está-hard-coded-20">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="calendário-individual"><a class="header" href="#calendário-individual">Calendário individual</a></h1>
<blockquote>
<p>Essa feature cria um calendário individual para os imóveis do proprietário permitindo que esse usuário veja as reservas de cada imóvel individualmente no calendário.</p>
</blockquote>
<ul>
<li>Ao clicar no botão “Visualizar imóvel” o sistema deve redirecionar o usuário para a página que contém o grid do calendário do imóvel selecionado</li>
<li>o sistema deve fazer um GET na API com endpoint em <code>/calendar/reservations/?check_in_date__lte={year-month-day}&amp;check_out_date__gte={year-month-day}&amp;listing__property__in={id}</code> e retornar as reservas inseridas e bloqueadas no imóvel no período de datas informado como parâmetro no corpo dessa requisição.</li>
<li>As reservas e os bloqueios retornados devem ser mostrados no grid do calendário.</li>
<li>Ao clicar em um dos marcadores da reserva ou do bloqueio no grid do calendário, o sistema deve abrir um modal com as informações da reserva ou do bloqueio.</li>
<li>Ao clicar no botão “Fechar” do modal da etapa anterior o sistema deve ocultar esse modal para o usuário.</li>
<li>Ao clicar no botão Solicitar bloqueio o usuário é redirecionado para o fluxo de <a href="Owner/./create_lock.html">Criar bloqueio</a></li>
<li>Os componentes devem ser responsivo para mobile.</li>
<li>Ao clicar na seta a direita do mês/ano o sitema deve ir para o mês anterior ao que estava.</li>
<li>Ao clicar na seta a esquerda do mês/ano o sistema deve ir para o mês posterior ao que estava.</li>
<li>O calendário mostra o total de noites com reservas e total de noites com bloqueio por mês.</li>
</ul>
<h2 id="onde-está-o-código-21"><a class="header" href="#onde-está-o-código-21">Onde está o código?</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/billbenettiSeazone/sapron-pms-web/tree/main/front/src/components/OwnerPage/GridCalendar">Componente Grid do calendário</a></p>
<p><strong>Requisições a APIs:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/services/Reservation">Requisições</a></p>
<h2 id="o-que-está-hard-coded-21"><a class="header" href="#o-que-está-hard-coded-21">O que está hard coded?</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="solicitar-bloqueio-pelo-calendário-individual"><a class="header" href="#solicitar-bloqueio-pelo-calendário-individual">Solicitar bloqueio pelo <a href="Owner/./individual_calendar">calendário individual</a></a></h1>
<blockquote>
<p>Feature que permite realizar o bloqueio do imóvel do proprietário clicando no botão “Solicitar bloqueio” presente no calendário individual do imóvel </p>
</blockquote>
<ul>
<li>Ao clicar no botão “Solicitar bloqueio” o sistema deve abrir um modal para a seleção do intervalo de datas</li>
<li>Ao abrir o mini-calendário duplo para selecionar o range de datas, o sistema deve fazer um GET na API com endpoint em <code>inserir endpoint aqui</code> e retornar os dias indisponíveis, ou seja, aqueles dias que já foram bloqueados</li>
<li>Os dias bloqueados devem aparecer marcados no mini-calendário duplo e o usuário não deve ter permissão de selecionar tais dias </li>
<li>Ao clicar no botão “Bloquear” o sistema deve abrir um modal de confirmação com as informações do código do imóvel e o intervalo de datas selecionados pelo usuário</li>
<li>Se o usuário clicar no botão “Confirmar” o sistema deve fazer um POST na API com endpoint em <code>inserir endpoint aqui</code> para criar o bloqueio</li>
<li>Ao confirmar o bloqueio do imóvel, o sistema deve mostrar um modal com a informação de que a solicitação de bloqueio foi bem sucedida</li>
<li>O bloqueio realizado deve ser mostrado no calendário do imóvel
Se o usuário clicar no botão “Cancelar” o modal deve ser fechado e nenhuma requisição deve ser feita.</li>
</ul>
<h2 id="onde-está-o-código-22"><a class="header" href="#onde-está-o-código-22">Onde está o código?</a></h2>
<p><strong>Front-end:</strong></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/OwnerPage/Modal/ModalPropertyLock">Modal criar bloqueio</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/OwnerPage/Modal/ModalConfirmLock">Modal confirmar bloqueio</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/OwnerPage/Modal/ModalSuccessLock">Modal bloqueio criado com sucesso</a></p>
<p><a href="https://github.com/cabfersp/sapron-pms-web/tree/main/front/src/components/DatePickerRange">mini-calendário duplo</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
